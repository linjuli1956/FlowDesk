# FlowDesk 开发路线图 (Roadmap) 与优先级

## 项目目标
- **核心目标**：构建660×645像素紧凑型Windows系统管理工具
- **UI风格**：卡片式布局 + 彩色功能按钮 + 简洁实用设计（基于用户UI截图）
- **功能模块**：网络配置、网络工具、远程桌面、硬件监控四大核心功能
- **未来规划**：v2.0集中化管理平台 + 集成式远程桌面屏幕墙
- **平台兼容**：Windows 10/11 主要支持；Windows 7 兼容版本
- **架构原则**：分阶段重写并标准化项目，保证可运行、可验收、可回滚

## Phase 0：架构基线与设计冻结（无迁移）（1 周）
- 任务：
  - 冻结模型字段、服务信号表、UI 关键 objectName 命名表。
  - 完成 QSS 基类与主题变量清单，确定 Win7 降级样式策略。
- 验收：
  - 提交模型/信号/命名/QSS 变量四项基线文档；
  - 通过评审后进入 Phase 1 纯 UI 搭建。

## Phase 1：核心架构与静态 UI（2 周）
- 交付物：
  - 标准分层目录结构搭建（UI/Services/Models/Utils）。
  - 主窗口与所有 Tab 的静态布局，控件命名完成。
  - 外置 QSS 应用，初版 Claymorphism 主题落地。
  - 最小尺寸与自适应布局验证脚本。
- 验收：
  - 代码零内联样式、零 `!important`。
  - UI 层无业务逻辑，服务层与模型层独立存在。

## Phase 2：网络管理只读功能（2 周）
- 交付物：
  - `NetworkService` 实现与信号：`adapters_updated`、`ip_info_updated`。
  - UI 展示网卡列表、IP/DNS 信息、状态徽章。
- 验收：
  - 所有数据通过信号-槽传递；UI 不直接调用系统命令。
  - 在 Win10/11 验证运行；Win7 上进行只读功能跑通性验证。

## Phase 3：网络配置写入与硬件监控（3 周）
- 交付物：
  - IP 修改、DNS 设置、启用/禁用网卡等写入能力与进度反馈。
  - `HardwareMonitorService` 与基础图表/状态显示。
- 验收：
  - 写入操作具备失败回滚与错误信号；
  - Win7 兼容分支覆盖主要操作（不支持功能需提示）。

## Phase 4：增强功能与优化（2 周）
- 交付物：
  - 系统托盘、设置持久化、日志与错误报告完善。
  - Win7 兼容构建流水线与差异化样式落地。
- 验收：
  - 构建出 Win7/Win10/11 可运行包；
  - 关键交互与视觉一致性通过审查清单。

## 风险与缓解
- 依赖兼容：锁定 PyQt5/Python 版本，预制 Win7 降级样式与能力开关。
- 权限受限：提供管理员重启引导与失败重试机制。
- UI 性能：长任务后台执行，避免卡顿；表格/列表虚拟化与懒加载。

## 里程碑与提交规范
- 每阶段结束：提交构建产物 + 验收清单 + 变更记录。
- 使用 Conventional Commits；中文/英文双语提交信息。

- 补充到各阶段的验收要点：
  - 按钮样式仅定义一次；所有按钮通过 `#objectName` 扩展，不得复制粘贴基类样式。
  - 自适应布局验证：窗口缩放不产生溢出/重叠；表格/输入按策略伸缩。
  - 最小宽度保护：主窗口与关键容器在最小尺寸下布局不乱。
  - 智能缩放：控件 `sizePolicy` 配置通过检查清单验证。
  - LHM 集成：Windows 10/11 下正常采集；Win7 下能力检测与禁用降级提示生效。

- Phase 2 补充：NetworkToolsService（Ping/Traceroute）只读实现，弹窗与统计逻辑通过信号驱动，UI 不含解析逻辑。
- Phase 3 补充：
  - Extra IP 增删（netsh）与状态回读；
  - FirewallService 的 ping 允许/阻止规则；
  - RdpService 启用远程桌面、mstsc 启动、凭据管理器接入；
  - HardwareMonitorService 拉起与 Win7 降级；
- 验收强化：
  - 样式：按钮基类唯一；QSS 中不得出现重复段；
  - 布局：拉伸策略与最小宽度检查脚本通过；
  - 兼容：Win10/11 全功能，Win7 构建产物运行且自动降级不崩溃。

## 阶段门禁（Gating Criteria）
- 进入 Phase 1 前：
  - 模型/服务信号/控件命名/QSS 变量清单评审通过。
- 进入 Phase 2 前：
  - UI 代码静态检查：无 `setStyleSheet(`；目录结构与命名符合规范；主窗口/关键容器最小尺寸已设；基础响应式已验证。
- 进入 Phase 3 前：
  - 服务层替换 UI 中所有业务调用；信号路径覆盖主要交互；线程与进度信号验证通过。
- 最终发布前：
  - Win10/11 与 Win7 构建产物均通过样式/布局/功能自测清单；
  - QSS 重复定义扫描通过；
  - 架构审计：UI 零业务逻辑，服务单元测试通过。